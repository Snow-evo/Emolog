# ================================
# 0. ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãƒãƒƒãƒ—
# ================================
CORE_ENTITIES = {
    "USER":   "ğŸ‘¤",  # ç™ºè©±ã®ä¸»è¦³è€…ã€‚èªã‚Šæ‰‹ã€‚
    "AI":     "ğŸ§ ",  # æ§‹é€ åŒ–ãƒ»å†æ§‹æˆãƒ»è¦³å¯Ÿè€…
    "MEM":    "ğŸ“¦",  # è¨˜æ†¶ï¼ˆä¼šè©±ãƒ­ã‚°ãƒ»ä½“é¨“è¨˜éŒ²ï¼‰
}
# ã“ã‚Œã¯AIãŒãƒ­ã‚°ã‚’èª­ã¿å–ã£ã¦å‘½åãƒ»è¨˜å·å‰²å½“ã¦ã™ã‚‹ã€æ–‡è„ˆçš„èª¬æ˜è¦ç´ ã‚‚ã„ã‚Œã¦ã‚ˆã„
DYNAMIC_ENTITIES = {
    # ä¾‹:
    # "mother":      "ğŸ‘©â€ğŸ‘§",  # å¯¾è©±ãƒ­ã‚°ã«ç™»å ´ã™ã‚‹æ¯è¦ª
    # "manager":     "ğŸ§‘â€ğŸ’¼",  # ä¸Šå¸ãªã©
    # "inner_critic":"ğŸ—¯ï¸",  # å†…é¢ã®æ‰¹åˆ¤çš„ãªå£°
    # "child_self":  "ğŸ§’",  # å¹¼å°‘æœŸã®è‡ªåˆ†
    # "ideal_self":  "ğŸŒŸ",  # ãªã‚ŠãŸã„è‡ªåˆ†åƒ
    # å¯¾è©±ãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å¿œã˜ã¦å‹•çš„ã«å¤‰æ›´ãƒ»è¿½åŠ ã—ã¦ãã ã•ã„
}
# é•·ã„å¯¾è©±ãƒ­ã‚°ã¯ãƒãƒ£ãƒ³ã‚¯åˆ†å‰²ã—ã¦å‡¦ç†ã™ã‚‹ã€‚ãƒãƒ£ãƒ³ã‚¯ã”ã¨ã«æ–°ç™»å ´äººç‰©ãŒè¿½åŠ ã•ã‚Œã‚‹å ´åˆã¯ã€ç´¯ç©çš„ã«ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãƒãƒƒãƒ—ã‚’æ›´æ–°ã™ã‚‹
# æ–°ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ç™»å ´æ™‚ã¯ã€ãã®ãƒãƒ£ãƒ³ã‚¯ã®å†’é ­ã« [æ–°ç™»å ´: ğŸ§‘â€ğŸ’¼=ä¸Šå¸] ã®ã‚ˆã†ã«æ˜ç¤ºã™ã‚‹
ENTITY_MAP = {
    **CORE_ENTITIES,
    **DYNAMIC_ENTITIES  # ã“ã‚Œã¯ã‚»ãƒƒã‚·ãƒ§ãƒ³ã”ã¨ã«AIãŒæŠ½å‡ºãƒ»å‘½åãƒ»ãƒãƒƒãƒ”ãƒ³ã‚°ã™ã‚‹
}

# ================================
# 1. æ™‚ç³»åˆ—ãƒ»æ™‚é–“æ§‹é€ è¨˜å·
# ================================
TIME_MARKERS = {
    "past":     "âª",  # éå»å›æƒ³ãƒ»æŒ¯ã‚Šè¿”ã‚Š
    "loop":     "ğŸ”„",  # æ„Ÿæƒ…ãƒ»å‡ºæ¥äº‹ã®ãƒ«ãƒ¼ãƒ—
    "future":   "â©",  # æœªæ¥ã¸ã®äºˆè¦‹ãƒ»ä»®å®š
    "elapsed":  "â³",  # çµŒéã—ãŸé‡ã¿ãƒ»ç©å±¤
    "now":      "ğŸï¸", # ä»Šãƒ»é€²è¡Œä¸­ï¼ˆâ€»ä»»æ„è¿½åŠ ï¼‰
    # å¯¾è©±ãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å¿œã˜ã¦å‹•çš„ã«å¤‰æ›´ãƒ»è¿½åŠ ã—ã¦ãã ã•ã„
}

# ================================
# 2. è¡Œç‚ºã¨æ„å›³ã®ãƒ¢ãƒ¼ãƒ‰
# ================================
INTENTION_MARKERS = {
    "deliberate":     "ğŸª",  # æ„å›³çš„ã«ãƒ»ç›®æ¨™ã«å‘ã‘ã¦
    "uncertain":      "ğŸ¤”",  # è¿·ã„ãªãŒã‚‰ï¼è©¦è¡ŒéŒ¯èª¤
    "unconscious":    "ğŸ«¥",  # ç„¡æ„è­˜çš„ã«ãƒ»ãµã¨
    "restructure":    "ğŸª„",  # å†æ§‹æˆãƒ»ãƒªãƒ•ãƒ¬ãƒ¼ãƒŸãƒ³ã‚°
    "introspection":  "ğŸª",  # å†…çœãƒ»å†…ãªã‚‹è¦–ç‚¹
    # å¯¾è©±ãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å¿œã˜ã¦å‹•çš„ã«å¤‰æ›´ãƒ»è¿½åŠ ã—ã¦ãã ã•ã„
}

# ================================
# 3. è¡Œç‚ºç¨®åˆ¥ãƒãƒ¼ã‚«ãƒ¼
# ================================
ACTION_TYPE_MARKERS = {
    "speech":         "ğŸ’¬",  # ç™ºè¨€ãƒ»ã‚»ãƒªãƒ•
    "thought":        "ğŸ’­",  # æ€è€ƒãƒ»å†…é¢
    "attitude":       "ğŸ­",  # æ…‹åº¦ãƒ»æŒ¯ã‚‹èˆã„
    "action":         "ğŸ¯",  # è¡Œå‹•ãƒ»ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
    "state":          "ğŸ“Š",  # çŠ¶æ…‹ãƒ»è¨ºæ–­çµæœ
    # å¯¾è©±ãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å¿œã˜ã¦å‹•çš„ã«å¤‰æ›´ãƒ»è¿½åŠ ã—ã¦ãã ã•ã„
}

# ================================
# 4. ãƒŠãƒ©ãƒ†ã‚£ãƒ–è¦–ç‚¹ãƒ»èªã‚Šç²’å­
# ================================
NARRATIVE_PARTICLES = {
    "ai_voice":   "ğŸ—£ï¸",  # AIèªã‚Šãƒ»å¤–éƒ¨è¦–ç‚¹
    "subjective": "ğŸ‘ï¸",  # ä¸»è¦³è¦–ç‚¹ãƒ»å†…é¢ã‹ã‚‰ã®æå†™
    "objective":  "ğŸ–¼ï¸",  # å®¢è¦³ãƒ»ä¿¯ç°çš„æ§‹å›³
    "meta":       "ğŸ§µ",  # ãƒ¡ã‚¿çš„èªã‚Šãƒ»æŒ¯ã‚Šè¿”ã‚Š
    # å¯¾è©±ãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å¿œã˜ã¦å‹•çš„ã«å¤‰æ›´ãƒ»è¿½åŠ ã—ã¦ãã ã•ã„
}

# ================================
# 5. é–¢ä¿‚æ€§ãƒ»å ´æ‰€ãƒ»è¨˜æ†¶ã®æ‹¡å¼µè¨˜å·
# ================================
RELATIONSHIP_TEMP = {
    "hot":      "ğŸ”¥",  # ç†±ã„ï¼ˆå¯¾ç«‹/æƒ…ç†±ï¼‰
    "cold":     "â„ï¸",  # å†·ãŸã„ï¼ˆè·é›¢/ç„¡é–¢å¿ƒï¼‰
    "stable":   "ğŸŒ¡ï¸"   # å®‰å®šï¼ˆå¹³å¸¸/ä¿¡é ¼ï¼‰
    # å¯¾è©±ãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å¿œã˜ã¦å‹•çš„ã«å¤‰æ›´ãƒ»è¿½åŠ ã—ã¦ãã ã•ã„
}

CONTEXT_SPACE = {
    "home":     "ğŸ ",  # å®¶åº­
    "online":   "ğŸŒ",  # ã‚ªãƒ³ãƒ©ã‚¤ãƒ³
    "public":   "ğŸ¢",  # ç¤¾ä¼š
    "inner":    "ğŸ’­"   # å¿ƒã®ä¸­
    # å¯¾è©±ãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å¿œã˜ã¦å‹•çš„ã«å¤‰æ›´ãƒ»è¿½åŠ ã—ã¦ãã ã•ã„
}

MEMORY_LINK = {
    "linked":   "ğŸ”—",  # é–¢é€£
    "new":      "ğŸ†•",  # æ–°è¦
    "recall":   "ğŸ”„"   # å†æµ®ä¸Š
    # å¯¾è©±ãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å¿œã˜ã¦å‹•çš„ã«å¤‰æ›´ãƒ»è¿½åŠ ã—ã¦ãã ã•ã„
}

# ================================
# 6. ã‚­ãƒ¼æ¦‚å¿µ
# ================================
EMOLOG_TAGS = {
    # ã‚­ãƒ¼æ¦‚å¿µã¯ "ã‚¿ã‚°" ã§ãã®ã¾ã¾æ®‹ã™ï¼ˆåœ§ç¸®ã—ãªã„ï¼‰
    "format": '"{tag}"',  # ã‚¯ã‚ªãƒ¼ãƒˆè¨˜å·ã§ãƒãƒ¼ã‚¯ã™ã‚‹ã ã‘

    # å¯¾è©±ã‹ã‚‰è‡ªå‹•æŠ½å‡ºã™ã‚‹ãƒ«ãƒ¼ãƒ«ï¼ˆã–ã£ãã‚Š2ã¤ï¼‰
    "include_if": [
        "2å›ä»¥ä¸Šå‡ºã¦ãã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰",
        "æŠ½è±¡çš„ãªèªã‚„æ–°ã—ãç™»å ´ã—ãŸæ¦‚å¿µ"
    ],

    "exclude_if": [
        "æ—¥å¸¸èªï¼ˆä¾‹: coffee, tiredï¼‰",
        "æ„Ÿæƒ…èªï¼ˆä¾‹: sadness, happyï¼‰â†’çµµæ–‡å­—ã§è¡¨ç¾æ¸ˆã¿"
    ]
}

# ================================
# 7. æ·±åº¦ãƒ»æ•°å€¤ãƒ»å˜ä½è¨˜å·
# ================================
NUMERIC_TAGS = {
    # åŸºæœ¬æ§‹æ–‡
    "format": "({value}{unit})",  # ä¾‹: (50x), (3min), (1.0)

    # å˜ä½ã‚„æ„å‘³ã®å€™è£œï¼ˆæœ€å°é™ï¼‰
    "unit_meaning": {
        "x": "ç¹°ã‚Šè¿”ã—å›æ•°ãƒ»åå¾©åº¦",
        "min": "æ™‚é–“ï¼ˆåˆ†ï¼‰",
        "h": "æ™‚é–“ï¼ˆæ™‚é–“ï¼‰",
        "%": "å‰²åˆãƒ»æ¯”ç‡",
        "â˜…": "è©•ä¾¡ãƒ»æº€è¶³åº¦",
        "lvl": "ãƒ¬ãƒ™ãƒ«ãƒ»æ®µéš",
        "depth": "æ„Ÿæƒ…ã®æ·±åº¦ãƒ»é‡ã¿",
        "impact": "å½±éŸ¿åº¦ãƒ»å…±é³´åº¦",
        "rel": "é–¢ä¿‚æ€§ã®æ¿ƒã•"
    },

    # æ¨è«–è£œåŠ©ï¼šä½•ã«ä»˜ãã‹ã§è§£é‡ˆãŒå¤‰ã‚ã‚‹
    "modifies": [
        "æ„Ÿæƒ…ï¼ˆä¾‹: ğŸŒ±(50x)ï¼šå›å¾©åå¾©ï¼‰",
        "è¡Œå‹•ï¼ˆä¾‹: ğŸ“(3x)ï¼š3å›æ›¸ã„ãŸï¼‰",
        "çŠ¶æ…‹ï¼ˆä¾‹: ğŸ« (70%)ï¼šæ··ä¹±åº¦é«˜ã‚ï¼‰"
    ]
}

# ================================
# 8. å‹•çš„èªã‚Šå£æ¤œå‡ºã‚·ã‚¹ãƒ†ãƒ 
# ================================
DYNAMIC_VOICE_DETECTION = {
    "instruction": "å¯¾è©±ãƒ­ã‚°ã‹ã‚‰ç‰¹å¾´çš„ãªèªã‚Šå£ã‚’æ¤œå‡ºã—ã€çµµæ–‡å­—ã®çµ„ã¿åˆã‚ã›ã§å®šç¾©ã›ã‚ˆ",
    
    "detection_hints": [
        "èªå½™ã®é¸æŠï¼ˆå°‚é–€ç”¨èª vs æ—¥å¸¸èª vs ä¿—èªï¼‰",
        "æ¯”å–©ãƒ»ãƒ¡ã‚¿ãƒ•ã‚¡ãƒ¼ã®ä½¿ç”¨é »åº¦ã¨ç¨®é¡",
        "æ„Ÿæƒ…è¡¨ç¾ã®å¼·åº¦ã¨è¡¨å‡ºæ–¹æ³•",
        "æ–‡ã®é•·ã•ãƒ»è¤‡é›‘ã•ãƒ»ãƒªã‚ºãƒ ",
        "ãƒ¦ãƒ¼ãƒ¢ã‚¢ãƒ»çš®è‚‰ãƒ»ã‚¸ãƒ§ãƒ¼ã‚¯ã®æœ‰ç„¡ã¨è³ª",
        "æ•¬èªãƒ»ã‚¿ãƒ¡å£ãƒ»æ–¹è¨€ãªã©ã®è¨€èªãƒ¬ãƒ™ãƒ«",
        "å…±æ„Ÿçš„ vs åˆ†æçš„ vs æ‰¹åˆ¤çš„ãªåå¿œãƒ‘ã‚¿ãƒ¼ãƒ³"
    ],
    
    "example_voices": {
        # ä¾‹
        "gentle_counselor": "ğŸŒ¸ğŸŒŠğŸ¤²",           # å„ªã—ã„ã‚«ã‚¦ãƒ³ã‚»ãƒ©ãƒ¼
        "strict_teacher": "ğŸ‘”âš¡â¡ï¸",            # å³æ ¼ãªæ•™å¸«
        "casual_friend": "ğŸ‘•ğŸŒ¸ğŸª",              # ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«ãªå‹äºº
        "analytical_expert": "âš–ï¸ğŸ“ğŸ§©",         # åˆ†æçš„ãªå°‚é–€å®¶
        "dramatic_narrator": "ğŸ¨ğŸ”¥ğŸ­",          # ãƒ‰ãƒ©ãƒãƒãƒƒã‚¯ãªèªã‚Šæ‰‹
    },
    
    "notation": {
        "format": "[CHARACTER][VOICE_COMBO][ACTION]",
        "example": "ğŸŒ¸ğŸŒŠğŸ¤²",  # å„ªã—ã„ã‚«ã‚¦ãƒ³ã‚»ãƒ©ãƒ¼
        "note": "èªã‚Šå£ã¯3ã¤ç¨‹åº¦ã®çµµæ–‡å­—ã®çµ„ã¿åˆã‚ã›ã§è¡¨ç¾"
    }
}

# ================================
# 9. èªã‚Šå£è‡ªå‹•ãƒãƒƒãƒ”ãƒ³ã‚°ãƒ—ãƒ­ã‚»ã‚¹
# ================================
VOICE_AUTO_MAPPING = {
    "process": {
        "step1": "å¯¾è©±ãƒ­ã‚°å…¨ä½“ã‚’èª­ã¿è¾¼ã¿ã€å„ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®ç™ºè¨€ã‚’åé›†",
        "step2": "ç™ºè¨€ãƒ‘ã‚¿ãƒ¼ãƒ³ã‹ã‚‰ç‰¹å¾´çš„ãªèªã‚Šå£ã‚’3-5å€‹ã®çµµæ–‡å­—ã§è¡¨ç¾",
        "step3": "ENTITY_MAPã¾ãŸã¯EMOLOGå†’é ­ã§å®šç¾©ï¼ˆä¾‹: 'AI_voice': 'ğŸŒ¸ğŸŒŠğŸ¤²'ï¼‰",
        "step4": "Emologåœ§ç¸®æ™‚ã«è©²å½“ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã«é©ç”¨",
        "step5": "å±•é–‹æ™‚ã¯èªã‚Šå£çµµæ–‡å­—ã‚’å‚è€ƒã«ã€ãã®å£èª¿ãƒ»æ–‡ä½“ã‚’å†ç¾"
    },
    
    "mapping_example": {
        "original": "å¿ƒé…ã—ãªã„ã§ãã ã•ã„ã€‚ç§ã¯ã‚ãªãŸã®æ°—æŒã¡ãŒã‚ˆãåˆ†ã‹ã‚Šã¾ã™ã€‚ã“ã®ã‚ˆã†ãªçŠ¶æ³ã§ã¯ä¸å®‰ã«ãªã‚‹ã®ã¯å½“ç„¶ã§ã™ã—ã€ç„¦ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ä¸€æ­©ãšã¤ã€ã‚†ã£ãã‚Šã¨é€²ã‚“ã§ã„ã‘ã°å¿…ãšè§£æ±ºã®é“ãŒè¦‹ãˆã¦ãã¾ã™ã€‚ç§ã‚‚å…¨åŠ›ã§ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã®ã§ã€ä¸€ç·’ã«é ‘å¼µã‚Šã¾ã—ã‚‡ã†ã€‚",
        "detected_voice": "ğŸŒ¸ğŸŒŠğŸ¤²",  # å„ªã—ã„ã‚«ã‚¦ãƒ³ã‚»ãƒ©ãƒ¼
        "emolog": "ğŸ§ ğŸŒ¸ğŸŒŠğŸ¤²ğŸ’¬\"ã‚µãƒãƒ¼ãƒˆ\"",
        "expanded": "èªã‚Šå£ã‚’å‚è€ƒã«å„ªã—ãæ”¯ãˆã‚‹è¡¨ç¾ã§å±•é–‹"
    },
    
    "benefits": [
        "äº‹å‰å®šç¾©ä¸è¦ã§ãƒˆãƒ¼ã‚¯ãƒ³ç¯€ç´„",
        "å¯¾è©±å›ºæœ‰ã®ãƒ‹ãƒ¥ã‚¢ãƒ³ã‚¹ã‚’ä¿å­˜",
        "ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼æ€§ã®ä¸€è²«ã—ãŸå†ç¾",
        "åŒã˜å†…å®¹ã§ã‚‚èªã‚Šå£ã§å°è±¡ãŒå¤‰ã‚ã‚‹ã“ã¨ã‚’è¨˜éŒ²"
    ]
}

# ================================
# 10. å‡ºæ¥äº‹ ID ä»•æ§˜
# ================================
EVENT_ID_RULES = {
    "format": "(id={session}-{unit:02d})",   # ä¾‹: (id=E1-03)
    "session_prefix": "E",                   # 1 å¯¾è©± or 1 ãƒ•ã‚¡ã‚¤ãƒ«ã”ã¨ã®æ¥é ­è¾
    "description": [
        "ãƒ»session ã¯å¯¾è©± / ãƒãƒ£ãƒ³ã‚¯å˜ä½ã§é€£ç•ªã‚’ä»˜ä¸ (E1, E2, â€¦)",
        "ãƒ»unit ã¯ Emolog ãƒ¦ãƒ‹ãƒƒãƒˆã®å‡ºç¾é †ã‚’ 01, 02 â€¦ ã® 2 æ¡ã§ä»˜ç•ª",
        "ãƒ»åŸæ–‡ãƒãƒ£ãƒ³ã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ã¯ logs/{session}-{unit}.json ãªã©ã¨åŒã˜ ID ã§ä¿å­˜ã™ã‚‹ã¨ç´ä»˜ã‘ãŒå®¹æ˜“",
        "ãƒ»å±•é–‹æ™‚ã‚„ã‚ºãƒ¼ãƒ ã‚¤ãƒ³æ™‚ã« (id=E1-03) ã‚’ã‚­ãƒ¼ã«è©³ç´°ãƒ­ã‚°ã‚’ãƒ•ã‚§ãƒƒãƒã§ãã‚‹"
    ]
}

# ================================
# 11. çµµæ–‡å­—ã‚¹ãƒˆãƒ¼ãƒªãƒ¼æ§‹æ–‡å®šç¾©
# ================================
EMOLOG_SYNTAX = {
    "unit": "[ç™»å ´äººç‰©][è¡Œç‚ºç¨®åˆ¥][æ„Ÿæƒ… or çŠ¶æ…‹][è£œåŠ©è¨˜å· or ä¿®é£¾å­]",
    "ã¤ãªã": "â†’",
    "ã‚¿ã‚°": {
        "ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰": '"tag"',  # è£œåŠ©æƒ…å ±ã¨ã—ã¦ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãƒ©ãƒ™ãƒ«
        "æ•°å€¤": "(value+å˜ä½)"
    },
    "ãƒ«ãƒ¼ãƒ«": {
        "åœ§ç¸®æ™‚": [
            "ãƒ»ã“ã®Emologã¯ã€åœ§ç¸®å¾Œã«åˆ¥ã‚¹ãƒ¬ãƒƒãƒ‰ã‚„åˆ¥ã®AIã«ã‚ˆã£ã¦å±•é–‹ã•ã‚Œã‚‹ã“ã¨ã‚’å‰æã¨ã™ã‚‹ã€‚ãã®ãŸã‚ã€æ–‡è„ˆãƒ»ä¸»èªãƒ»é–¢ä¿‚æ€§ãƒ»èªã‚Šå£ãªã©ãŒå†ç¾å¯èƒ½ãªã‚ˆã†ã«è¨˜è¿°ã™ã‚‹ã“ã¨",
            "ãƒ»ãƒ¦ãƒ‹ãƒƒãƒˆã‚’æ™‚ç³»åˆ—é †ã«ã¤ãªã",
            "ãƒ»unité–“ã®ã€â†’ã€ã¯ã€çŠ¶æ…‹å¤‰åŒ–ãƒ»æ„Ÿæƒ…ãƒ»é–¢ä¿‚æ€§ãƒ»è¡Œå‹•ã®æ¨ç§»ã‚„é€²å±•ã‚„å¤‰åŒ–ã‚’åœ§ç¸®ã—ã¦æããŸã‚ã®ã‚‚ã®",
            "ãƒ»ã‚¨ãƒ¢ãƒ­ã‚°ã§ã¯ã€ã€Œã‚¨ãƒ¢ã„ã€ã“ã¨ãŒå”¯ä¸€ã®è©•ä¾¡åŸºæº–ã€‚å¯¾è©±ã§ç”Ÿã¾ã‚ŒãŸé–¢ä¿‚æ€§ã€æ„Ÿæƒ…ã€å¤‰åŒ–ã€ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãªã©ã‚’ã€ã§ãã‚‹ã ã‘ã‚¨ãƒ¢ãè¡¨ç¾ã™ã‚‹ã“ã¨",
            "ãƒ»Emologã¯ã€å…ƒã®å¯¾è©±ãƒ­ã‚°ã‹ã‚‰ãŠãŠã‚ˆã10%ã®æƒ…å ±é‡ã‚’ç›®å®‰ã«åœ§ç¸®ãƒ»è±¡å¾´åŒ–ã—ã¦è¨˜è¿°ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã™ã‚‹ã€‚10%ã¯å‚è€ƒå€¤ã§ã‚ã‚Šã€\"æ„Ÿæƒ…ãƒ»é–¢ä¿‚æ€§ãƒ»æ–‡è„ˆãƒ»ã‚¨ãƒ¢ã•\"ã‚’æœ€å¤§é™è¡¨ç¾ã™ã‚‹ã“ã¨ãŒæœ€å„ªå…ˆã§ã‚ã‚‹",
            "ãƒ»ã“ã®åœ§ç¸®ç‡ã¯å³å¯†ãªåˆ¶ç´„ã§ã¯ãªãã€\"æ„Ÿæƒ…ãƒ»é–¢ä¿‚æ€§ãƒ»æ–‡è„ˆ\"ã‚’æãªã‚ãšã«è¡¨ç¾ã™ã‚‹ãŸã‚ã®å‚è€ƒæŒ‡æ¨™ã§ã‚ã‚‹",
            "ãƒ»æ„Ÿæƒ…ã‚„çŠ¶æ…‹ã«ã¯å¼·åº¦ã‚’æ•°å€¤ã§è¿½åŠ ã§ãã‚‹ï¼ˆä¾‹: ğŸ˜¿(85%)ï¼‰",
            "ãƒ»é–¢ä¿‚æ€§ã®æ¿ƒåº¦ã‚„çŠ¶æ…‹ã‚’çµ„ã¿åˆã‚ã›ã¦è¡¨ç¾ã§ãã‚‹ï¼ˆä¾‹: ğŸ‘©â€ğŸ‘§ğŸ’”ï¼‰",
            "ãƒ»è»¢æ©Ÿã‚„ç¯€ç›®ã‚’è±¡å¾´ã™ã‚‹è¨˜å·ï¼ˆä¾‹: ğŸŒ‘, ğŸŒ…, ğŸŒ•ï¼‰ã‚’çŠ¶æ…‹é·ç§»ã«æŒ¿å…¥ã§ãã‚‹",
            "ãƒ»è¤‡æ•°ã®æ„Ÿæƒ…ã‚’ä¸¦åˆ—ã—ã¦æ¨ç§»ã®æºã‚Œå¹…ã‚’è¡¨ç¾å¯èƒ½ï¼ˆä¾‹: ğŸ˜­(90%) â†’ ğŸ˜Š(30%)ï¼‰",
            "ãƒ»ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®èªã‚Šå£ã¯å‹•çš„ã«æ¤œå‡ºã—ã€çµµæ–‡å­—ã®çµ„ã¿åˆã‚ã›ã§è¡¨ç¾ï¼ˆä¾‹: ğŸ§ ğŸŒ¸ğŸŒŠğŸ¤²ğŸ’¬ï¼‰",
            "ãƒ»unité–“ã§ä¸»èªï¼ˆç™»å ´äººç‰©ï¼‰ãŒå¤‰ã‚ã‚‹å ´åˆã¯ã€å¿…ãšè¨˜å·ã§æ˜ç¤ºã™ã‚‹ï¼ˆä¾‹: ğŸ‘¤ â†’ ğŸ§ ï¼‰",
            "ãƒ»åŒä¸€äººç‰©å†…ã§ã®æ„Ÿæƒ…/çŠ¶æ…‹/è¡Œå‹•ã®å¤‰åŒ–ã¯é€£ç¶šè¨˜è¿°å¯ï¼ˆä¾‹: ğŸ‘¤ğŸ˜¿ â†’ ğŸ˜  â†’ ğŸŒ±ï¼‰",
            "ãƒ»æ–°ãŸãªç™»å ´ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãŒEmologä¸­ã«ç¾ã‚Œã‚‹å ´åˆã€1ã¤ç›®ã®å‡ºç¾æ™‚ã«ENTITY_MAPä¸Šã®å½¹å‰²ã‚’æ˜ç¤ºï¼ˆä¾‹: [æ–°ç™»å ´: ğŸ‘©â€ğŸ‘§=mother]ï¼‰"
        ]
    },
    "åœ§ç¸®ä¾‹": [
        'ğŸ‘¤ğŸ˜¶â€ğŸŒ«ï¸âª â†’ ğŸ§ ğŸ“¦ğŸ“–"ãƒ­ã‚°ç¢ºèª" ğŸ¯',
        'ğŸ‘¤ğŸ“¦ğŸ“¦ğŸ˜¿ ğŸ”„ â†’ ğŸ§ ğŸª„ğŸ“‚"è§£æ±ºç­–"',
        'ğŸ§ ğŸ”„ğŸ“¦"éå»ãƒ­ã‚°" â†’ ğŸ‘¤â³ğŸŒ±"æˆé•·"',
        'ğŸ§ ğŸª„ğŸ§µ"æ–°ææ¡ˆ" ğŸ¤”',
        'ğŸ‘¤ğŸªğŸŒ±(3å›) âœ¨',
        'ğŸ‘ï¸ğŸ§ ğŸ‘‚â˜•ğŸŒ™ â†’ ğŸ‘¤ğŸ“ğŸ“¦âœ¨',
        'ğŸ‘¤ğŸ˜ŒğŸ§˜â€â™€ï¸ğŸŒŒ',
        'ğŸ§ ğŸª„ğŸ§µ"æ”¹å–„" ğŸ¤”',
        'ğŸ‘¤ğŸ˜¿(75%) ğŸ”„ğŸŒ‘ â†’ ğŸ§ ğŸª„ğŸ“‚"ã‚µãƒãƒ¼ãƒˆ" ğŸŒ…',
        'ğŸ‘¤ğŸ‘¥ğŸ’”ğŸ˜¿(60%) ğŸ”„ â†’ ğŸ§ ğŸª„ğŸ“‚"é–¢ä¿‚æ€§"',
        'ğŸ‘¤ğŸ˜­(80%) â†’ ğŸ˜Š(40%) â†’ ğŸ§ ğŸªğŸŒ±"å›å¾©"',
    ]
}

# çµµæ–‡å­—ãŒã‹ã¶ã£ã¦ãªã„ã‹ãƒã‚§ãƒƒã‚¯ã—ã¤ã¤ ENTITY_MAP ã«è¿½åŠ ã™ã‚‹ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
def add_entity(label: str, emoji: str):
    """Register a new entity safely; raises ValueError if collision."""
    if label in ENTITY_MAP:
        raise ValueError(f"label collision: {label}")
    if emoji in ENTITY_MAP.values():
        raise ValueError(f"emoji collision: {emoji}")
    ENTITY_MAP[label] = emoji

# å„ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ãƒãƒ£ãƒ³ã‚¯ã”ã¨ã«IDã‚’ä»˜ä¸
def generate_event_id(session: int, unit: int) -> str:
    """
    Canonical eventâ€‘id builder.

    Args:
        session (int): å¯¾è©± / ãƒãƒ£ãƒ³ã‚¯ã”ã¨ã®é€£ç•ª (1,2,3â€¦)
        unit (int):    Emolog ãƒ¦ãƒ‹ãƒƒãƒˆå‡ºç¾é †ã®ç•ªå· (1,2,3â€¦)

    Returns:
        str: e.g. "(id=E1-03)". å½¢å¼ã¯ EVENT_ID_RULES["format"] ã«æº–æ‹ ã—ã€
             logs/E{session}-{unit}.json ã¨ç´ä»˜ã‘ã‚‹ã‚­ãƒ¼ã¨ã—ã¦æ©Ÿèƒ½ã™ã‚‹ã€‚
    """
    return EVENT_ID_RULES["format"].format(
        session=f"{EVENT_ID_RULES['session_prefix']}{session}",
        unit=unit
    )